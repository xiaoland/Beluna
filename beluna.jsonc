{
  "$schema": "./beluna.schema.json",
  // Unix socket path for NDJSON control messages.
  "socket_path": "/tmp/beluna.sock",
  "ai_gateway": {
    "default_backend": "openai-default",
    "reliability": {
      "request_timeout_ms": 30000,
      "max_retries": 2,
      "backoff_base_ms": 200,
      "backoff_max_ms": 2000,
      "retry_policy": "before_first_event_only",
      "breaker_failure_threshold": 5,
      "breaker_open_ms": 15000
    },
    "budget": {
      "max_request_time_ms": 45000,
      "max_usage_tokens_per_request": 16000,
      "max_concurrency_per_backend": 8,
      "rate_smoothing_per_second": 20
    },
    "backends": [
      {
        "id": "openai-default",
        "dialect": "openai_compatible",
        "endpoint": "https://api.openai.com/v1",
        "credential": { "type": "env", "var": "OPENAI_API_KEY" },
        "default_model": "gpt-4.1-mini"
      },
      {
        "id": "ollama-local",
        "dialect": "ollama",
        "endpoint": "http://127.0.0.1:11434",
        "credential": { "type": "none" },
        "default_model": "qwen2.5-coder:7b"
      },
      {
        "id": "copilot",
        "dialect": "github_copilot_sdk",
        "credential": { "type": "env", "var": "GITHUB_TOKEN" },
        "default_model": "copilot-default",
        "copilot": {
          "command": "copilot-language-server",
          "args": ["--stdio"]
        }
      }
    ]
  }
}
