# Cortex PRD

## Purpose

Cortex is Beluna's deliberative cognition boundary.

It consumes a drained `Sense[]` batch plus current physical+cognition state and emits:
1. non-binding `Act[]`
2. next `CognitionState`

## Requirements

- Cortex behaves as a pure boundary function (no direct side effects).
- Cortex does not durably persist cognition state itself.
- Cortex pipeline is `input_helpers -> <input-ir> -> primary -> <output-ir> -> output_helpers`.
- Input helper pair (`sense_helper`, `act_descriptor_helper`) executes concurrently.
- Output helper pair (`acts_helper`, `goal_stack_helper`) executes concurrently.
- Input IR root tag is `<input-ir>`; Output IR root tag is `<output-ir>`.
- `act_descriptor_helper` cache is in-memory/process-scoped.
- `act_id` is generated by code (UUIDv7).
- Cortex can intend broadly; execution is constrained downstream in Stem pipeline.
- Failure policy:
  - primary failure/timeout => fail-closed noop with unchanged cognition state,
  - helper failure => fallback section or empty output for that helper.

## Out of Scope

- Direct execution access.
- Runtime queue ownership.
- Settlement or resource reservation decisions.
